<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Vy Vy üßß</title>
    <meta name="google" content="notranslate">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;700&display=swap');
        :root { --red: #b30000; --gold: #ffd700; --sakura: #ffb7c5; }
        body, html { margin: 0; padding: 0; background: #1a0000; color: white; font-family: 'Quicksand', sans-serif; overflow: hidden; touch-action: manipulation; }

        /* Background Sakura (The one you like) */
        #bg-sakura { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .p { position: absolute; background: var(--sakura); border-radius: 10px 0 10px 0; animation: fall linear infinite; opacity: 0.7; }
        @keyframes fall { to { transform: translateY(100vh) rotate(360deg); } }

        .slide { position: absolute; width: 100%; height: 100%; display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 10; padding: 25px; box-sizing: border-box; text-align: center; background: radial-gradient(circle, #4a0000 0%, #1a0000 100%); }
        .active { display: flex !important; animation: fadeIn 0.6s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(1.1); } to { opacity: 1; transform: scale(1); } }

        .title { font-family: 'Dancing Script', cursive; color: var(--gold); font-size: 3rem; margin-bottom: 10px; text-shadow: 0 0 15px rgba(255,215,0,0.4); }
        .btn-wah { background: var(--gold); color: #4a0000 !important; border: none; padding: 15px 40px; border-radius: 50px; font-weight: 800; cursor: pointer; margin-top: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: 0.3s; }

        /* FIX: Fortune Jar */
        .jar { width: 120px; height: 150px; border: 4px solid var(--gold); border-radius: 20px 20px 80px 80px; position: relative; background: rgba(255,255,255,0.1); display: flex; align-items: flex-end; justify-content: center; gap: 5px; padding-bottom: 20px; }
        .stick { width: 12px; height: 100px; background: var(--gold); border-radius: 5px; transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); position: relative; }
        .picked { transform: translateY(-80px) rotate(15deg); box-shadow: 0 0 20px var(--gold); }

        /* FIX: Lixi Swiping */
        .lixi-envelope { width: 200px; height: 280px; background: var(--red); border: 3px solid var(--gold); border-radius: 15px; position: relative; overflow: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .lixi-cap { width: 100%; height: 60px; background: #800000; border-bottom: 2px dashed var(--gold); position: absolute; top: 0; z-index: 2; transition: 0.8s; cursor: grab; }
        .lixi-content { font-size: 1.1rem; padding: 15px; color: var(--gold); font-weight: bold; opacity: 0; transition: 1s; }

        /* FIX: Sakura Storm */
        .storm-area { width: 250px; height: 250px; border: 2px solid var(--sakura); border-radius: 50%; display: flex; align-items: center; justify-content: center; position: relative; background: rgba(255,183,197,0.1); box-shadow: inset 0 0 30px var(--sakura); }
        .storm-target { font-size: 60px; filter: drop-shadow(0 0 10px white); }
    </style>
</head>
<body>

<div id="bg-sakura"></div>

<div id="app">
    <div class="slide active" id="s1">
        <div style="font-size: 80px; margin-bottom: 20px;">üêé</div>
        <h1 class="title">Xin Ch√†o Vy Vy!</h1>
        <p>A flawless 2026 Journey for my queen.</p>
        <button class="btn-wah" onclick="go(2)">OPEN HER HEART ‚ù§Ô∏è</button>
    </div>

    <div class="slide" id="s2">
        <h2 class="title" style="font-size: 2.2rem;">My Promise...</h2>
        <div style="background: rgba(0,0,0,0.4); padding: 20px; border-radius: 20px; border: 1px solid var(--gold); width: 85%;">
            <p id="typing" style="font-weight: bold; line-height: 1.6; color: var(--gold); min-height: 120px;"></p>
        </div>
        <button class="btn-wah" id="b2" style="display:none;" onclick="go(3)">NEXT JOURNEY ‚ú®</button>
    </div>

    <div class="slide" id="s3">
        <h2 class="title">Love Fortune</h2>
        <p>Tap the jar to pick our destiny!</p>
        <div class="jar" id="jarContainer" onclick="pickFortune()">
            <div class="stick" id="s-stick"></div>
            <div class="stick"></div>
            <div class="stick"></div>
        </div>
        <p id="fortune-msg" style="margin-top:20px; font-weight: bold; color: var(--gold); font-size: 1.2rem;"></p>
        <button class="btn-wah" id="b3" style="display:none;" onclick="go(4)">RECEIVE LUCK üßß</button>
    </div>

    <div class="slide" id="s4">
        <h2 class="title">Path to 2026</h2>
        <p>Tap both hearts to connect our future!</p>
        <div style="display: flex; gap: 50px; font-size: 50px;">
            <span id="h1" onclick="conn(1)">ü§ç</span>
            <span id="h2" onclick="conn(2)">ü§ç</span>
        </div>
        <p id="conn-msg" style="margin-top:20px; color: var(--gold);"></p>
        <button class="btn-wah" id="b4" style="display:none;" onclick="go(5)">TI·∫æP T·ª§C üîó</button>
    </div>

    <div class="slide" id="s5">
        <h2 class="title">Open Your L√¨ X√¨</h2>
        <p>Swipe the dark cap UP to reveal!</p>
        <div class="lixi-envelope">
            <div class="lixi-cap" id="cap" onclick="tearLixi()"></div>
            <div style="font-size: 50px;">üßß</div>
            <div class="lixi-content" id="lixiText">You won 1,000,000 kisses and a happy 2026 with Dandy! ‚ù§Ô∏è</div>
        </div>
        <button class="btn-wah" id="b5" style="display:none;" onclick="go(6)">I LOVE IT! üòã</button>
    </div>

    <div class="slide" id="s6">
        <h2 class="title">Sakura Storm</h2>
        <p>Rub the screen fast to make it bloom!</p>
        <div class="storm-area" ontouchmove="swish(event)" onmousemove="swish(event)">
            <div class="storm-target">üå∏</div>
        </div>
        <p id="storm-progress" style="margin-top:10px; color: var(--sakura);">Bloom: 0%</p>
        <button class="btn-wah" id="b6" style="display:none;" onclick="go(7)">SO PRETTY ‚ú®</button>
    </div>

    <div class="slide" id="s7">
        <h2 class="title">Happy New Year</h2>
        <p>Tap the firecracker 3 times!</p>
        <div id="fire" onclick="boom()" style="font-size: 80px; cursor: pointer;">üß®</div>
        <button class="btn-wah" id="b7" style="display:none;" onclick="go(8)">WATCH üéÜ</button>
    </div>

    <div class="slide" id="s8">
        <h2 class="title">Forever?</h2>
        <p>Will you be mine through 2026 and more?</p>
        <div style="display: flex; gap: 20px;">
            <button class="btn-wah" onclick="go(9)">YES (Duy√™n)</button>
            <button class="btn-wah" id="no" onmouseover="dodge()">NO</button>
        </div>
    </div>

    <div class="slide" id="s9">
        <h2 class="title">Ch√∫c M·ª´ng NƒÉm M·ªõi!</h2>
        <div style="font-size: 80px;">üêéüíç</div>
        <p>Vy Vy, you are my greatest destiny.</p>
        <p style="color: var(--gold); font-weight: 800; font-size: 1.4rem;">ANH Y√äU EM R·∫§T NHI·ªÄU!</p>
        <button class="btn-wah" onclick="location.reload()">REPLAY LOVE üîÑ</button>
    </div>
</div>

<script>
    // 1. FIXED Sakura Background
    const bg = document.getElementById('bg-sakura');
    for(let i=0; i<30; i++) {
        let p = document.createElement('div'); p.className = 'p';
        p.style.left = Math.random()*100 + 'vw';
        let s = Math.random()*10+10 + 'px'; p.style.width = s; p.style.height = s;
        p.style.animationDuration = Math.random()*3+2 + 's';
        p.style.animationDelay = Math.random()*5 + 's';
        bg.appendChild(p);
    }

    // 2. Navigation
    function go(n) {
        document.querySelectorAll('.slide').forEach(s => s.classList.remove('active'));
        document.getElementById('s' + n).classList.add('active');
        if(n===2) startType();
        if(n===9) confetti({ particleCount: 400, spread: 100 });
    }

    // Slide 2: Typing
    function startType() {
        const text = "To Vy Vy... üå∏\n2026 is the year we gallop toward our dreams. You're the luck in my pocket and the joy in my heart. Let's make every moment count. Ch√∫c m·ª´ng nƒÉm m·ªõi, em y√™u! ‚ù§Ô∏è";
        let i = 0; let target = document.getElementById('typing'); target.innerHTML = "";
        const t = setInterval(() => {
            if(i < text.length) { target.innerHTML += text.charAt(i) === '\n' ? '<br>' : text.charAt(i); i++; }
            else { clearInterval(t); document.getElementById('b2').style.display = 'inline-block'; }
        }, 50);
    }

    // Slide 3: FIX Fortune
    let jarLocked = false;
    function pickFortune() {
        if(jarLocked) return;
        jarLocked = true;
        document.getElementById('s-stick').classList.add('picked');
        setTimeout(() => {
            document.getElementById('fortune-msg').innerHTML = "Fate: Eternal Love with Dandy! ‚ù§Ô∏èüßß";
            document.getElementById('b3').style.display = 'inline-block';
        }, 600);
    }

    // Slide 4: Connect
    let c1=0, c2=0;
    function conn(n) {
        if(n===1) { c1=1; document.getElementById('h1').innerHTML = '‚ù§Ô∏è'; }
        if(n===2) { c2=1; document.getElementById('h2').innerHTML = '‚ù§Ô∏è'; }
        if(c1 && c2) { document.getElementById('conn-msg').innerHTML = "Hearts Connected Forever!"; document.getElementById('b4').style.display = 'inline-block'; }
    }

    // Slide 5: FIX Lixi Tear (Simple Click/Swipe)
    function tearLixi() {
        document.getElementById('cap').style.transform = 'translateY(-100px) rotate(-10deg)';
        document.getElementById('lixiText').style.opacity = '1';
        document.getElementById('b5').style.display = 'inline-block';
        confetti({ origin: { y: 0.7 } });
    }

    // Slide 6: FIX Sakura Swish
    let progress = 0;
    function swish(e) {
        if(progress < 100) {
            progress += 1.5;
            document.getElementById('storm-progress').innerHTML = `Bloom: ${Math.floor(progress)}%`;
            if(Math.random() > 0.8) confetti({ particleCount: 5, colors: ['#ffb7c5'], origin: { x: Math.random(), y: Math.random() } });
            if(progress >= 100) document.getElementById('b6').style.display = 'inline-block';
        }
    }

    // Slide 7: Boom
    let bCount = 0;
    function boom() {
        bCount++; confetti();
        if(bCount >= 3) { document.getElementById('fire').innerHTML = 'üéÜ'; document.getElementById('b7').style.display = 'inline-block'; }
    }

    // Slide 8: Dodge
    function dodge() {
        let n = document.getElementById('no');
        n.style.position = 'fixed';
        n.style.top = Math.random()*80 + '%'; n.style.left = Math.random()*80 + '%';
    }
</script>
</body>
</html>
